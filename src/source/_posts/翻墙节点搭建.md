---
title: 翻墙节点搭建
date: 2024-10-07 7:29:00
tags: Florr
cover: img/Server/Server-Background.png
---

# 1. 服务器购买

服务器可以从很多地方购买

如: 666云, 野草云, 搬瓦工等等

这里我们选用搬瓦工

注: 搬瓦工是年付, 如果你怕第一次失败, 可以选择别的商家

https://bandwagonhost.com/order/basic/Los%20Angeles/USCA_8

这里推荐选用 49.99$/年 的, 因为传输速度都一样, 除非你有别的要求, 否则就选这个

注: 有钱的大佬可以选用别的E-Commerce VPS, Ultra VPS, 不过很贵, 但会更好

注: 49.44/年 折合成人民币是 27元/月 其实也很便宜了

之后都是注册账号登录之类的

优惠码: BWHCGLUKKB

如果这个优惠码失效了, 可以去网上搜别的, 一搜一大把

(img/Server/Kiwivm.png)

购买成功后会来到这么一个页面, 先点击屏幕中央的 Stop

在左边找到 Install new OS

选择最下面的 Ubuntu-24.04-x86_64

点击 Reload , 确定

注意复制他给出的密码

等待重装完成即可

# 2. 连接至远程服务器

这里选用 Final Shell 作为远程连接工具, 也可以用别的

Final Shell: https://www.hostbuf.com/t/988.html

下载好之后自行安装, 完成应该是这个页面

(img/Server/Finalshel.png)

点击左上角的文件夹标志

在跳出的连接管理器左上角点击一个白色的方框标志

选择 SSH连接(Linux)

在跳出的窗口中填入你的信息

- 名称 随便填

- 主机 你买的服务器的ip地址, 可以去到 Kiwivm 那里找

- 端口 保持不变

- 用户名 root

- 密码 之前从 Kiwivm 那重装时复制来的密码

( 如果密码忘了, 可以会带Kiwivm界面, 选择左边的Root Password Reset, 重新生成一个密码 )

全部填完之后点击确定

再在连接中双击你的服务器, 打开

# 3. 服务器配置

## 基本设置

等待你的服务器连接成功后, 输入以下命令

``` bash
 sudo passwd # 重置你的root密码
```

``` bash
 tzselect # 选择时区, 分别选 4, 10, 1, 1, 切换至北京时间
```

( 注意: 选择完时区后将 TZ='Asia/Shanghai'; export TZ 一段写入你的.profile文件中, 具体方法如下 )

``` bash
sudo apt update         # 更新软件源
sudo apt install vim -y # 安装vim编辑器
vim .profile
```

来到最下面一行, 按a键开启编辑模式

将 TZ='Asia/Shanghai'; export TZ 这段复制进去

点击Esc, 输入:wq!, 回车

输入reboot重启你的服务器

重启完之后, 输入

``` bash
 unminimize              # 解除最小化安装
 sudo apt update         # 更新软件源
 sudo apt upgrade -y     # 更新所有软件
 sudo apt autoremove -y  # 删除无用软件
```

## 节点搭建

### 原理介绍

ChatGPT-4 原话
```
代理（Proxy）是一种中介服务器，位于客户端和目标服务器之间。其基本原理可以归纳如下：

1. 客户端请求： 客户端向代理服务器发送请求，如访问某个网站。
2. 请求转发： 代理服务器接收到请求后，会将其转发给目标服务器。
3. 目标服务器响应： 目标服务器处理请求并将响应发回给代理服务器。
4. 响应转发： 代理服务器接收到目标服务器的响应后，再将其转发回客户端。

代理可以用于以下目的：

隐藏客户端IP地址：通过代理，目标服务器无法直接看到客户端的真实IP地址，从而保护用户隐私。

访问控制：代理服务器可以根据一定规则来决定是否允许客户端的请求，常用于企业内部网络管理。

缓存内容：代理服务器可以缓存目标服务器的响应内容，提高访问速度并减少带宽使用。

代理的具体实现可以多种多样，比如正向代理、反向代理、透明代理等，每种类型都有其特定的应用场景。代理本质上是一种中介机制，通过这种机制，客户端和服务器之间的通信得以优化和安全化。
```

用人话介绍就是

```
在学校, 你想吃辣条, 但是老师不让你买
正好, 你们班有一个走读生, 你让他帮你带两包
```

即一个中转点, 帮你访问一些会被中国计算机网络与信息安全管理中心( 简称CNCERT )拦下的信息

工信部防火墙的原理:

比如说你访问 Google , 一条数据请求发送过去, 但不幸的是, 被CNCERT服务器检测到了, 他为了不让你发送, 抢在Google发送数据之前, 先一步返回给你一个错误的信息, 所以你会出现访问不了的情况

所以翻墙的原理是: 找一个没有被CNCERT阻止的服务器, 让他帮你访问

( 注: vpn也可以实现翻墙的目的, 但是这里只介绍代理的方式 )

### 实际搭建

能实现代理的内核用很多, 如Xray,v2fly等等

这里介绍 Xray

Github 仓库:
https://github.com/vaxilu/x-ui

下载 x-ui 图形化界面:

打开你的Final Shell, 连接至你的服务器, 输入:

``` bash
bash <(curl -Ls https://raw.githubusercontent.com/vaxilu/x-ui/master/install.sh)
```

输入网站的端口, 用户名密码, 等待安装完成即可

端口, 用户名, 密码都是自己设置,没有硬性规定

安装完成之后, 你可以使用 http://你的ip:你的端口 进行访问

登录之后, 找到左边的入站代理, 添加入站

协议选择 Shadowsocks ( 速度快, 简单 )

剩下的信息自己填 , 端口在1~65536之内,但是最好不要填1000以内的

注: 底下的三个按钮不要动

点击确定即可

# 4. 客户端连接

## 工具下载

Windows: https://github.com/2dust/v2rayN/releases/download/6.60/zz_v2rayN-With-Core-SelfContained.7z

下载好之后将解压好的客户端放在一个你喜欢的位置

从中找到v2rayN.exe的文件，右键，选择属性

在上方的栏中点击"兼容性"，在下方找到"以管理员身份启动"

打开，完成

退出之后双击客户端即可

## 对接节点

在v2rayN左上角, 找到服务器

点击,选择 " 添加[Shadowsocks]服务器 "

别名随便填

地址填你的服务器ip

端口, 密码, 加密方式填你之前在x-ui面板上设置的

点击确定, 按 Ctrl+E 来测试服务器的速度

# 5. 常见问题

## 安装服务器时出错

复制完整错误信息, 自行百度, 可能错误太多了, 这里无法一样给出

## 服务器速度为 -1, Timed out, 等等错误

来到Final Shell,连接服务器

输入

```bash
 ufw allow 你的端口
```

同时仔细检查x-ui面板上的配置

包括加密方式( 最容易错的地方, 一个数字不一样都不行 )

进阶教程:

https://blog.flowercity.xyz/%E7%BF%BB%E5%A2%99%E8%8A%82%E7%82%B9%E6%90%AD%E5%BB%BA-%E8%BF%9B%E9%98%B6/
